<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Maple Cliff National Guard ‚Äî Embed Editor</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div id="particles-js" aria-hidden="true"></div>

  <header class="topbar">
    <div class="brand-left">
      <img src="logo.png" alt="logo" class="logo"/>
      <div class="brand-title">Maple Cliff ‚Äî Embed Editor</div>
    </div>

    <div class="brand-right">
      <div id="embed-carousel" class="carousel" aria-hidden="false"></div>
      <button id="add-embed" class="btn">‚ûï Add Embed</button>
      <button id="prev-embed" class="btn">‚óÄ</button>
      <button id="next-embed" class="btn">‚ñ∂</button>
      <button id="export-json" class="btn">Export JSON</button>
      <button id="import-json" class="btn">Import JSON</button>
      <button id="copy-json" class="btn">Copy JSON</button>
      <input id="upload-json-file" type="file" accept=".json,application/json" style="display:none" />
    </div>
  </header>

  <main class="app" role="main">
    <aside class="sidebar">
      <div id="session-info">Embed 1 / 1</div>

      <!-- stored list (populated from localStorage embed_... keys) -->
      <div id="stored-list" class="stored-list" aria-live="polite"></div>

      <div class="muted" id="last-key"></div>
    </aside>

    <article class="builder">
      <div class="editor-overlay">
        <div class="row">
          <input id="title" class="input" placeholder="Title" />
          <input id="color" class="input color" placeholder="Hex color (e.g. d0b47b)" />
          <input id="color-picker" type="color" class="color-picker" title="Pick color" />
        </div>

        <textarea id="description" class="textarea" placeholder="Description"></textarea>

        <div class="row">
          <input id="image_url" class="input" placeholder="Image URL" />
          <input id="thumbnail_url" class="input" placeholder="Thumbnail URL" />
        </div>

        <div class="row">
          <input id="footer" class="input" placeholder="Footer text" />
          <input id="footer_icon" class="input" placeholder="Footer icon URL" />
        </div>

        <div class="block">
          <h4>Fields (grouped per embed)</h4>
          <div id="fields-list"></div>
          <div class="controls">
            <button id="add-field" class="btn">Add field</button>
          </div>
        </div>

        <div class="block">
          <h4>Buttons / Actions</h4>
          <div id="link-buttons"></div>
          <div id="select-menus" style="margin-top:8px"></div>
          <div class="controls">
            <button id="add-link" class="btn">Add button</button>
            <button id="add-select" class="btn">Add select</button>
          </div>
          <div class="muted">Button types: Link (url) / SendEmbed (send another saved embed). For SendEmbed provide target key and whether to send ephemerally to the invoker.</div>
        </div>

        <div class="block">
          <h4>Plain message (optional)</h4>
          <textarea id="plain_message" class="textarea" placeholder="Plain message to post with embed(s)"></textarea>
        </div>

        <div class="builder-actions">
          <button id="generate-key" class="btn">Generate Key</button>
          <button id="save-local" class="btn">Save local</button>
        </div>

        <div id="preview-area"></div>
      </div>
    </article>
  </main>

  <footer class="footer muted">Made with love by Tuna üêü</footer>

  <!-- Import modal -->
  <div id="import-modal" class="modal hidden" aria-hidden="true">
    <div class="modal-inner">
      <h3>Import JSON</h3>
      <p class="muted">Paste JSON here or upload a .json file. The JSON should be { "embeds": [ ... ] } or an array of embeds.</p>
      <textarea id="import-text" class="textarea" placeholder='Paste JSON here'></textarea>
      <div class="modal-actions">
        <button id="import-paste-btn" class="btn">Import from paste</button>
        <button id="import-upload-btn" class="btn">Upload file</button>
        <button id="import-cancel" class="btn muted">Cancel</button>
      </div>
      <div id="import-status" class="muted"></div>
    </div>
  </div>

  <!-- JSON display / copy overlay -->
  <div id="json-display" class="modal hidden" aria-hidden="true">
    <div class="modal-inner code-modal">
      <button id="json-close" class="close-x" title="Close">‚úï</button>
      <h3>Exported JSON</h3>
      <pre id="json-pre"><code id="json-code"></code></pre>
      <div class="modal-actions">
        <button id="json-copy-btn" class="btn">Copy to clipboard</button>
        <button id="json-download-btn" class="btn">Download</button>
      </div>
    </div>
  </div>

  <!-- JSON option modal (used by select builder) -->
  <div id="json-option-modal" class="modal hidden" aria-hidden="true">
    <div class="modal-inner">
      <h3>Paste full embed JSON</h3>
      <p class="muted">Paste a single embed object, an array of embeds, or a payload { "embeds": [...] }.</p>
      <textarea id="json-option-text" class="textarea" placeholder='Paste JSON here'></textarea>
      <div class="modal-actions">
        <button id="json-option-save" class="btn">Insert option</button>
        <button id="json-option-cancel" class="btn muted">Cancel</button>
      </div>
      <div id="json-option-error" class="muted" style="margin-top:8px"></div>
    </div>
  </div>

  <script src="particles.js"></script>
  <script>
    if (window.particlesJS) {
      particlesJS('particles-js', {
        particles: {
          number: { value: 80, density: { enable: true, value_area: 800 } },
          color: { value: ["#d0b47b", "#ffffff", "#aaaaaa"] },
          shape: { type: "circle" },
          opacity: { value: 0.55 },
          size: { value: 3 },
          line_linked: { enable: true, distance: 110, color: "#d0b47b", opacity: 0.12 },
          move: { enable: true, speed: 1 }
        },
        interactivity: { events: { onhover: { enable: true, mode: "repulse" }, onclick: { enable: true, mode: "push" } } }
      });
    }
  </script>

  <script src="app.js"></script>
</body>
</html>